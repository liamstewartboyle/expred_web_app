<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Counterfactual Assistant</title>
<!--    <script src="{{ url_for('static', filename='counterfactual.js') }}"></script> -->
    <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
    <script src="https://code.jquery.com/ui/1.13.0/jquery-ui.min.js"></script>
</head>
<body>
<div id="#original">
    <span id="#original-input" style="display:block">
        <h2 style="display: inline-flex">Query: <i>{{ query }}</i></h2>
        <h2>Document and rationals:</h2>
        <span style="display: inline-flex">
            <i><h3>{{ orig_doc }}</h3></i>
            <img src="{{ url_for('static', filename='imgs/' + hotflip_res[0]['pred'] + '.png')  }}" alt="{{ hotflip_res[0]['pred'] }}">
        </span>
    </span>

    </span>
</div>

<h2>Try to <b>flip</b> the prediction by replacing words without changing the meaning of the sentence:</h2>
<h2 style="color: #007fff">Examples:</h2>
<div style="display: block">
    <span class="counterfactual-rec">
        {% for res in hotflip_res[1:] %}
            <div>
            <span class="rec-counter">{{ res['input'] }}</span>
            <span>
                <img src="{{ url_for('static', filename='imgs/' + res['pred'] + '.png') }}" alt="{{ res['pred'] }}">
            </span>
            </div>
        {% endfor %}
    </span>
</div>
<h2 style="color: #007fff">Your choice:</h2>
<p>
    <input id='counterfactual-suggestion' type="text">
    <button id='test' type="button" name="predict">Ask BERT!</button>
</p>
<div id="query-history"></div>

<script>
    $("button").click(function() {
        console.log('clicked');
        let ct = $(this).siblings('#counterfactual-suggestion').val()
        $.ajax({
            url: "/doc-history",
            type: "get",
            data: {query: "{{ query }}",
                   doc: ct},
            success: function(response) {
                    $("#query-history").html(response);
                },
            error: function(xhr) {
                //Do Something to handle error
            }
        });
    });
</script>

</body>
</html>